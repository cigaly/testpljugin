if(typeof BIJELI=="undefined"){BIJELI=1,CRNI=-1,PRAZNO=0,BIJELA_DAMA=2,CRNA_DAMA=-2}if(typeof _draughts_engines=="undefined"){var _draughts_engines=[]}if(typeof draughts_engine=="undefined"){var draughts_engine=function(b,a){if(typeof a!="undefined"){_draughts_engines[b]=a}return _draughts_engines[b]}}if(typeof _draughts_engines[123]=="undefined"){(function(){var k=function(){if(arguments.length>2){return{active:true,black:arguments[0]%2==0!=arguments[1]%2==0,number:arguments[2]?((7-arguments[0])*8+(7-arguments[1])):(arguments[0]*8+arguments[1])}}else{var m=Math.floor(arguments[0]/8);var l=arguments[0]%8;var n=m%2==0!=l%2==0;return arguments[1]?{row:7-m,column:7-l,black:n}:{row:m,column:l,black:n}}};var e=[[-1,-1,1,8,-1,-1,-1,9],[-1,0,2,9,-1,-1,8,10],[-1,1,3,10,-1,-1,9,11],[-1,2,4,11,-1,-1,10,12],[-1,3,5,12,-1,-1,11,13],[-1,4,6,13,-1,-1,12,14],[-1,5,7,14,-1,-1,13,15],[-1,6,-1,15,-1,-1,14,-1],[0,-1,9,16,-1,1,-1,17],[1,8,10,17,0,2,16,18],[2,9,11,18,1,3,17,19],[3,10,12,19,2,4,18,20],[4,11,13,20,3,5,19,21],[5,12,14,21,4,6,20,22],[6,13,15,22,5,7,21,23],[7,14,-1,23,6,-1,22,-1],[8,-1,17,24,-1,9,-1,25],[9,16,18,25,8,10,24,26],[10,17,19,26,9,11,25,27],[11,18,20,27,10,12,26,28],[12,19,21,28,11,13,27,29],[13,20,22,29,12,14,28,30],[14,21,23,30,13,15,29,31],[15,22,-1,31,14,-1,30,-1],[16,-1,25,32,-1,17,-1,33],[17,24,26,33,16,18,32,34],[18,25,27,34,17,19,33,35],[19,26,28,35,18,20,34,36],[20,27,29,36,19,21,35,37],[21,28,30,37,20,22,36,38],[22,29,31,38,21,23,37,39],[23,30,-1,39,22,-1,38,-1],[24,-1,33,40,-1,25,-1,41],[25,32,34,41,24,26,40,42],[26,33,35,42,25,27,41,43],[27,34,36,43,26,28,42,44],[28,35,37,44,27,29,43,45],[29,36,38,45,28,30,44,46],[30,37,39,46,29,31,45,47],[31,38,-1,47,30,-1,46,-1],[32,-1,41,48,-1,33,-1,49],[33,40,42,49,32,34,48,50],[34,41,43,50,33,35,49,51],[35,42,44,51,34,36,50,52],[36,43,45,52,35,37,51,53],[37,44,46,53,36,38,52,54],[38,45,47,54,37,39,53,55],[39,46,-1,55,38,-1,54,-1],[40,-1,49,56,-1,41,-1,57],[41,48,50,57,40,42,56,58],[42,49,51,58,41,43,57,59],[43,50,52,59,42,44,58,60],[44,51,53,60,43,45,59,61],[45,52,54,61,44,46,60,62],[46,53,55,62,45,47,61,63],[47,54,-1,63,46,-1,62,-1],[48,-1,57,-1,-1,49,-1,-1],[49,56,58,-1,48,50,-1,-1],[50,57,59,-1,49,51,-1,-1],[51,58,60,-1,50,52,-1,-1],[52,59,61,-1,51,53,-1,-1],[53,60,62,-1,52,54,-1,-1],[54,61,63,-1,53,55,-1,-1],[55,62,-1,-1,54,-1,-1,-1]];var b=function(n){var l=k(n);return String.fromCharCode(97+l.column)+(8-l.row)},i=function(n){var l=k(8-(n.charCodeAt(1)-48),n.charCodeAt(0)-97,false);return l.number},g=function(l){var m,q,o,p;if(!l){m=[];q=0;while(q<64){m[q++]=0}return m}if(l instanceof Array){return l}if(l.length==32){m=[];for(q=o=0;o<32;++o){p=l.charCodeAt(o)-64;m[q++]=Math.floor(p/5-2);m[q++]=p%5-2}return m}else{if(l.length==64){m=[];for(o=0;o<64;++o){m[o]=l.charCodeAt(o)-67}return m}else{return null}}},j=function(l,m){if(l==1&&m<8){return 2}else{if(l==-1&&m>=56){return -2}else{return l}}};var d=function(o,n){if(typeof o=="string"){o=g(o)}function t(A,x,v){var w=A,u=x,z=v||[];if(v&&v.length){var B=b(w);for(var C=0;C<v.length;++C){B+="x"+b(v[C].e);v[C]=v[C].c}}else{var B=b(w)+"-"+b(u)}var y=function(){return b(A)+(v==null||v.length==0?"-":"x")+b(x)};return{sa:w,na:u,preko:z||[],toString:y,display:y,fullDisplay:function(){return B}}}function s(v,u){return u?{head:v,tail:u,length:1+u.length}:{head:null,tail:null,length:0}}function p(w,v,u){return{from:w,to:v,over:u,length:u.length}}var m=new s(null,null);var r=function(y,w){var C=w?1:-1,z,A,x,u=[];for(z=0;z<64;++z){var v=e[z];if(y[z]==C){var D=C==1?[0,1,2,4,5]:[1,2,3,6,7];for(var B=0;B<D.length;++B){x=v[D[B]];if(x>=0){if(y[x]==0){u.push(new t(z,x))}}}}else{if(y[z]==2*C){for(A=0;A<8;++A){x=v[A];if(y[x]==0){u.push(new t(z,x))}}}}}return u};var q=function(x,z){var E=function(V,Z){var aj=[],ak=e[Z],T=V[Z];var W=T==1?42:-42;var ai;var ac=T==1?[0,1,2,4,5]:[1,2,3,6,7];for(var ae=0;ae<ac.length;++ae){ai=ac[ae];var Y=ak[ai];var ab=false,aa=[];if(Y>=0&&T*V[Y]<0){var X=e[Y][ai];if(X>=0&&V[X]==0){var ad=[].concat(V);ad[X]=T;ad[Y]=W;ad[Z]=0;var ah=E(ad,X);if(ah&&ah.length>0){for(var U=0;U<ah.length;++U){var ag=ah[U];var af=new p(Z,ag.to,new s({c:Y,e:X},ag.over));aa.push(af)}ab=true}else{aa.push(new p(Z,X,new s({c:Y,e:X},m)))}}}if(ab){for(var U=0;U<aa.length;++U){if(aa[U].length>1){aj.push(aa[U])}}}else{for(var U=0;U<aa.length;++U){aj.push(aa[U])}}}return aj};var B=function(aa,ab){var X=e[ab],ah=aa[ab],ad=[],ac;var Z=ah==2?42:-42;for(ac=0;ac<4;++ac){var ag=false,ae=[],W=X[ac],U;if(W<0||ah*aa[W]>=0){continue}U=e[W][ac];if(U<0||aa[U]!=0){continue}var Y=[].concat(aa);Y[U]=ah;Y[W]=Z;Y[ab]=0;var af=B(Y,U);if(af&&af.length>0){for(var ai=0;ai<af.length;++ai){var V=af[ai];var T=new p(ab,V.to,new s({c:W,e:U},V.over));ae.push(T)}ag=true}else{ae.push(new p(ab,U,new s({c:W,e:U},m)))}if(ag){for(var ai=0;ai<ae.length;++ai){if(ae[ai].length>1){ad.push(ae[ai])}}}else{for(var ai=0;ai<ae.length;++ai){ad.push(ae[ai])}}}return ad};var S=function(T,X,U){if(X==null||X.length==0){return}for(var ab=0;ab<X.length;++ab){var W=X[ab];var aa=[];var Y=W.over;var V=0;while(Y!=m){aa.push(Y.head);Y=Y.tail}var Z=new t(W.from,W.to,aa);T.push(Z)}};var I,N,w,A,u,J,P,R,D,O,C,L,F=z?1:-1,y=[];for(var H=0;H<64;++H){var v=x[H];if(v==F){S(y,E(x,H),false)}else{if(v==2*F){S(y,B(x,H),true)}}}if(y.length>1){var R=[];var M=y[0].preko.length;for(var I=0;I<y.length;++I){var G=y[I];var K=G.preko.length;if(M>K){continue}if(M<K){M=K;R=[]}R.push(G)}y=R}loop1:for(I=0;I<y.length;++I){N=y[I];w=N.sa;A=N.na;u=N.preko;var Q=u.length;for(J=I+1;J<y.length;++J){P=y[J];if(P.sa!=w||P.na!=A||Q!=P.preko.length){continue}for(C=0;C<Q;++C){if(u[C]!=P.preko[C]){continue loop1}}y.splice(J--,1)}}return y};var l=q(o,n);if(l.length==0){l=r(o,n)}listaMogucihPoteza=l;return l};var a=function(l){l.whiteMove=!l.whiteMove;if(l.whiteMove){l.num++}};var c=function(l,m){var n=function(p){var r=function(x){var D=-1,u=m.length,w,t,A,z,B,C,v,y;A=x.split("x");while(--u>=0){w=m[u];t=w.fullDisplay();if(x==t){return u}else{z=t.split("x");B=false;if(A[0]==(z[0])&&A[A.length-1]==(z[z.length-1])){C=0;B=true;for(v=1;v<A.length-1;++v){y=z.indexOf(A[v],C+1);if(y<0){B=false;break}C=y}}if(B){if(D>=0){return -1}else{D=u}}else{if(x==(w.display())){if(D>=0){return -1}else{D=u}}}}}if(D<0){}return D};var s=r(p);if(s<0){s=r(p.replace(":","x"))}if(s<0){s=r(p.replace("-","x"))}if(s<0){s=r(p.replace(":","-"))}if(s<0){s=r(p.replace("x","-"))}if(s<0){try{log("Error: "+p);log(m)}catch(q){}}return s};var o=n(l);return o<0?null:m[o]};var h=function(l,y,q){var v;if(typeof y=="string"){throw new Error("Position as string not supported (?) : "+y)}else{v=y}if(typeof l=="string"){l=c(l,d(v,q))}if(l==null){try{log("Error#0")}catch(s){}return null}var w,z,A,u,x,r,o;w=l.na;z=l.sa;if((v[w]!=0)&&z!=w){try{log("Error#1")}catch(s){}return null}A=q?1:-1;if(v[z]!=A&&v[z]!=2*A){try{log("Error#2: "+z+"["+v[z]+"] ("+A+")");log(v)}catch(s){}return null}u=l.preko;if(u!=null){x=A==1?-1:1;r=u.length;while(--r>=0){if(v[u[r]]!=x&&v[u[r]]!=2*x){try{log("Error#3")}catch(s){}return null}}}var t={};t[w]=v[w]=j(v[z],w);if(z!=w){t[z]=v[z]=0}if(u!=null){r=u.length;while(--r>=0){var n=u[r];if(n!=w){t[n]=v[n]=0}}}return{move:l,position:v,changed:t}};var f={gameType:123,rows:8,columns:8,squares:64,piecesPerSide:16,firstMoveWhite:true,immediatePromotion:false,turkishCapture:false,captureSeparator:"x",encodeSquare:b,decodeSquare:i,initialPosition:function(){var l=new Array(64),m;for(m=0;m<16;l[m++]=-1){}for(m=16;m<48;l[m++]=0){}for(m=48;m<64;l[m++]=1){}return l},packPosition:function(l){var o="",m;for(m=0;m<64;m+=2){o=o.concat(String.fromCharCode((64+(l[m]+2)*5+l[m+1]+2)))}return o},unpackPosition:g,possibleMoves:d,validMoves:d,findMove:c,makeMove:h,advanceMove:a,checkForPromotion:j,mapping:k};draughts_engine(123,f);draughts_engine("gothic",f);return f})()};