if(typeof BIJELI=="undefined"){BIJELI=1,CRNI=-1,PRAZNO=0,BIJELA_DAMA=2,CRNA_DAMA=-2}if(typeof _draughts_engines=="undefined"){var _draughts_engines=[]}if(typeof draughts_engine=="undefined"){var draughts_engine=function(b,a){if(typeof a!="undefined"){_draughts_engines[b]=a}return _draughts_engines[b]}}if(typeof _draughts_engines[22]=="undefined"){(function(){var k=function(){if(arguments.length>2){if(arguments[0]%2==0==arguments[1]%2==0){return{active:true,black:true,number:arguments[2]?((7-arguments[0])*4+Math.floor((7-arguments[1])/2)):(arguments[0]*4+Math.floor(arguments[1]/2))}}else{return{active:false,black:false}}}else{var m=Math.floor(arguments[0]/4);var l=(arguments[0]%4)*2;if(m%2!=0){++l}return arguments[1]?{row:7-m,column:7-l,black:true}:{row:m,column:l,black:true}}};var e=[[-1,-1,-1,4],[-1,-1,4,5],[-1,-1,5,6],[-1,-1,6,7],[0,1,8,9],[1,2,9,10],[2,3,10,11],[3,-1,11,-1],[-1,4,-1,12],[4,5,12,13],[5,6,13,14],[6,7,14,15],[8,9,16,17],[9,10,17,18],[10,11,18,19],[11,-1,19,-1],[-1,12,-1,20],[12,13,20,21],[13,14,21,22],[14,15,22,23],[16,17,24,25],[17,18,25,26],[18,19,26,27],[19,-1,27,-1],[-1,20,-1,28],[20,21,28,29],[21,22,29,30],[22,23,30,31],[24,25,-1,-1],[25,26,-1,-1],[26,27,-1,-1],[27,-1,-1,-1]];var b=function(l){return Number(l+1).toString(10)},i=function(l){return parseInt(l,10)-1},g=function(l){var m,q,o,p;if(!l){m=[];q=0;while(q<32){m[q++]=0}return m}if(l instanceof Array){return l}if(l.length==16){m=[];for(q=o=0;o<16;++o){p=l.charCodeAt(o)-64;m[q++]=Math.floor(p/5-2);m[q++]=p%5-2}return m}else{if(l.length==32){m=[];for(o=0;o<32;++o){m[o]=l.charCodeAt(o)-67}return m}else{return null}}},j=function(l,m){if(l==1&&m<4){return 2}else{if(l==-1&&m>=28){return -2}else{return l}}};var d=function(o,n){if(typeof o=="string"){o=g(o)}function t(A,x,v){var w=A,u=x,z=v||[];if(v&&v.length){var B=b(w);for(var C=0;C<v.length;++C){B+="x"+b(v[C].e);v[C]=v[C].c}}else{var B=b(w)+"-"+b(u)}var y=function(){return b(A)+(v==null||v.length==0?"-":"x")+b(x)};return{sa:w,na:u,preko:z||[],toString:y,display:y,fullDisplay:function(){return B}}}function s(v,u){return u?{head:v,tail:u,length:1+u.length}:{head:null,tail:null,length:0}}function p(w,v,u){return{from:w,to:v,over:u,length:u.length}}var m=new s(null,null);var r=function(y,w){var C=w?1:-1,z,A,x,u=[];for(z=0;z<32;++z){var v=e[z];if(y[z]==C){var D=C==1?[0,1]:[2,3];for(var B=0;B<D.length;++B){x=v[D[B]];if(x>=0){if(y[x]==0){u.push(new t(z,x))}}}}else{if(y[z]==2*C){for(A=0;A<4;++A){x=v[A];if(y[x]==0){u.push(new t(z,x))}}}}}return u};var q=function(z,C){var I=function(aa,ae){var ao=[],ap=e[ae],Y=aa[ae];var ab=Y==1?42:-42;var an;var ah=Y==1?[0,1]:[2,3];for(var aj=0;aj<ah.length;++aj){an=ah[aj];var ad=ap[an];var ag=false,af=[];if(ad>=0&&aa[ad]==-Y){var ac=e[ad][an];if(ac>=0&&aa[ac]==0){var ai=[].concat(aa);ai[ac]=Y;ai[ad]=ab;ai[ae]=0;var am=I(ai,ac);if(am&&am.length>0){for(var Z=0;Z<am.length;++Z){var al=am[Z];var ak=new p(ae,al.to,new s({c:ad,e:ac},al.over));af.push(ak)}ag=true}else{af.push(new p(ae,ac,new s({c:ad,e:ac},m)))}}}if(ag){for(var Z=0;Z<af.length;++Z){if(af[Z].length>1){ao.push(af[Z])}}}else{for(var Z=0;Z<af.length;++Z){ao.push(af[Z])}}}return ao};var E=function(af,ag){var ac=e[ag],am=af[ag],ai=[],ah;var ae=am==2?42:-42;for(ah=0;ah<4;++ah){var al=false,aj=[],ab=ac[ah],Z;if(ab<0||am*af[ab]>=0){continue}Z=e[ab][ah];if(Z<0||af[Z]!=0){continue}var ad=[].concat(af);ad[Z]=am;ad[ab]=ae;ad[ag]=0;var ak=E(ad,Z);if(ak&&ak.length>0){for(var an=0;an<ak.length;++an){var aa=ak[an];var Y=new p(ag,aa.to,new s({c:ab,e:Z},aa.over));aj.push(Y)}al=true}else{aj.push(new p(ag,Z,new s({c:ab,e:Z},m)))}if(al){for(var an=0;an<aj.length;++an){if(aj[an].length>1){ai.push(aj[an])}}}else{for(var an=0;an<aj.length;++an){ai.push(aj[an])}}}return ai};var X=function(Y,ac,Z){if(ac==null||ac.length==0){return}for(var ag=0;ag<ac.length;++ag){var ab=ac[ag];var af=[];var ad=ab.over;var aa=0;while(ad!=m){af.push(ad.head);ad=ad.tail}var ae=new t(ab.from,ab.to,af);Y.push(ae)}};var N,S,y,D,u,O,U,W,H,T,F,Q,J=C?1:-1,A=[];for(var M=0;M<32;++M){var v=z[M];if(v==J){X(A,I(z,M),false)}else{if(v==2*J){X(A,E(z,M),true)}}}if(A.length>1){var W=[];var R=A[0].preko.length;for(var N=0;N<A.length;++N){var K=A[N];var P=K.preko.length;if(R>P){continue}if(R<P){R=P;W=[]}W.push(K)}A=W;if(A.length>1){var W=[];var x=false;for(var N=0;N<A.length;++N){var K=A[N];var L=z[K.sa];if(L==2||L==-2){if(!x){W=[];x=true}}else{if(x){continue}}W.push(K)}A=W;if(A.length>1){W=[];var R=0;var B=99;for(var N=0;N<A.length;++N){var K=A[N];var G=999,w=0;for(var P=0;P<K.preko.length;++P){if(z[K.preko[P]]==2||z[K.preko[P]]==-2){if(w++==0){G=P}}}if(R>w){continue}if(R<w){R=w;B=G;W=[]}else{if(R>0&&R==w){if(B>G){B=G;W=[]}else{if(B<G){continue}}}}W.push(K)}A=W}}}for(N=0;N<A.length;++N){S=A[N];y=S.sa;D=S.na;u=S.preko;var V=u.length;for(O=N+1;O<A.length;++O){U=A[O];if(U.sa!=y||U.na!=D||V!=U.preko.length){continue}W=[].concat(U.preko);T=V;for(F=0;F<V;++F){Q=u[F];for(H=0;H<T;++H){if(Q==W[H]){W[H--]=W[--T]}}}W=null;if(T==0){A.splice(O--,1)}}}return A};var l=q(o,n);if(l.length==0){l=r(o,n)}listaMogucihPoteza=l;return l};var a=function(l){l.whiteMove=!l.whiteMove;if(l.whiteMove){l.num++}};var c=function(l,m){var n=function(p){var r=function(x){var D=-1,u=m.length,w,t,A,z,B,C,v,y;A=x.split("x");while(--u>=0){w=m[u];t=w.fullDisplay();if(x==t){return u}else{z=t.split("x");B=false;if(A[0]==(z[0])&&A[A.length-1]==(z[z.length-1])){C=0;B=true;for(v=1;v<A.length-1;++v){y=z.indexOf(A[v],C+1);if(y<0){B=false;break}C=y}}if(B){if(D>=0){return -1}else{D=u}}else{if(x==(w.display())){if(D>=0){return -1}else{D=u}}}}}if(D<0){}return D};var s=r(p);if(s<0){s=r(p.replace(":","x"))}if(s<0){s=r(p.replace("-","x"))}if(s<0){s=r(p.replace(":","-"))}if(s<0){s=r(p.replace("x","-"))}if(s<0){try{log("Error: "+p);log(m)}catch(q){}}return s};var o=n(l);return o<0?null:m[o]};var h=function(l,y,q){var v;if(typeof y=="string"){throw new Error("Position as string not supported (?) : "+y)}else{v=y}if(typeof l=="string"){l=c(l,d(v,q))}if(l==null){try{log("Error#0")}catch(s){}return null}var w,z,A,u,x,r,o;w=l.na;z=l.sa;if((v[w]!=0)&&z!=w){try{log("Error#1")}catch(s){}return null}A=q?1:-1;if(v[z]!=A&&v[z]!=2*A){try{log("Error#2: "+z+"["+v[z]+"] ("+A+")");log(v)}catch(s){}return null}u=l.preko;if(u!=null){x=A==1?-1:1;r=u.length;while(--r>=0){if(v[u[r]]!=x&&v[u[r]]!=2*x){try{log("Error#3")}catch(s){}return null}}}var t={};t[w]=v[w]=j(v[z],w);if(z!=w){t[z]=v[z]=0}if(u!=null){r=u.length;while(--r>=0){var n=u[r];if(n!=w){t[n]=v[n]=0}}}return{move:l,position:v,changed:t}};var f={gameType:22,rows:8,columns:8,squares:32,piecesPerSide:12,firstMoveWhite:true,immediatePromotion:false,turkishCapture:false,captureSeparator:"x",encodeSquare:b,decodeSquare:i,initialPosition:function(){var l=new Array(32),m;for(m=0;m<12;l[m++]=-1){}for(m=12;m<20;l[m++]=0){}for(m=20;m<32;l[m++]=1){}return l},packPosition:function(l){var o="",m;for(m=0;m<32;m+=2){o=o.concat(String.fromCharCode((64+(l[m]+2)*5+l[m+1]+2)))}return o},unpackPosition:g,possibleMoves:d,validMoves:d,findMove:c,makeMove:h,advanceMove:a,checkForPromotion:j,mapping:k};draughts_engine(22,f);draughts_engine("italian",f);return f})()};