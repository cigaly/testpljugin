if(typeof BIJELI=="undefined"){BIJELI=1,CRNI=-1,PRAZNO=0,BIJELA_DAMA=2,CRNA_DAMA=-2}if(typeof _draughts_engines=="undefined"){var _draughts_engines=[]}if(typeof draughts_engine=="undefined"){var draughts_engine=function(b,a){if(typeof a!="undefined"){_draughts_engines[b]=a}return _draughts_engines[b]}}if(typeof _draughts_engines[21]=="undefined"){(function(){var k=function(){if(arguments.length>2){if(arguments[0]%2==0==arguments[1]%2==0){return{active:false,black:false}}else{return{active:true,black:true,number:arguments[2]?((7-arguments[0])*4+Math.floor((7-arguments[1])/2)):(arguments[0]*4+Math.floor(arguments[1]/2))}}}else{var m=Math.floor(arguments[0]/4);var l=(arguments[0]%4)*2;if(m%2==0){++l}return arguments[1]?{row:7-m,column:7-l,black:true}:{row:m,column:l,black:true}}};var e=[[-1,-1,4,5],[-1,-1,5,6],[-1,-1,6,7],[-1,-1,7,-1],[-1,0,-1,8],[0,1,8,9],[1,2,9,10],[2,3,10,11],[4,5,12,13],[5,6,13,14],[6,7,14,15],[7,-1,15,-1],[-1,8,-1,16],[8,9,16,17],[9,10,17,18],[10,11,18,19],[12,13,20,21],[13,14,21,22],[14,15,22,23],[15,-1,23,-1],[-1,16,-1,24],[16,17,24,25],[17,18,25,26],[18,19,26,27],[20,21,28,29],[21,22,29,30],[22,23,30,31],[23,-1,31,-1],[-1,24,-1,-1],[24,25,-1,-1],[25,26,-1,-1],[26,27,-1,-1]];var b=function(l){return Number(l+1).toString(10)},i=function(l){return parseInt(l,10)-1},g=function(l){var m,q,o,p;if(!l){m=[];q=0;while(q<32){m[q++]=0}return m}if(l instanceof Array){return l}if(l.length==16){m=[];for(q=o=0;o<16;++o){p=l.charCodeAt(o)-64;m[q++]=Math.floor(p/5-2);m[q++]=p%5-2}return m}else{if(l.length==32){m=[];for(o=0;o<32;++o){m[o]=l.charCodeAt(o)-67}return m}else{return null}}},j=function(l,m){if(l==1&&m>=28){return 2}else{if(l==-1&&m<4){return -2}else{return l}}};var d=function(o,n){if(typeof o=="string"){o=g(o)}function t(A,x,v){var w=A,u=x,z=v||[];if(v&&v.length){var B=b(w);for(var C=0;C<v.length;++C){B+="x"+b(v[C].e);v[C]=v[C].c}}else{var B=b(w)+"-"+b(u)}var y=function(){return b(A)+(v==null||v.length==0?"-":"x")+b(x)};return{sa:w,na:u,preko:z||[],toString:y,display:y,fullDisplay:function(){return B}}}function s(v,u){return u?{head:v,tail:u,length:1+u.length}:{head:null,tail:null,length:0}}function p(w,v,u){return{from:w,to:v,over:u,length:u.length}}var m=new s(null,null);var r=function(y,w){var C=w?1:-1,z,A,x,u=[];for(z=0;z<32;++z){var v=e[z];if(y[z]==C){var D=C==1?[2,3]:[0,1];for(var B=0;B<D.length;++B){x=v[D[B]];if(x>=0){if(y[x]==0){u.push(new t(z,x))}}}}else{if(y[z]==2*C){for(A=0;A<4;++A){x=v[A];if(y[x]==0){u.push(new t(z,x))}}}}}return u};var q=function(x,z){var E=function(S,W){var ag=[],ah=e[W],Q=S[W];var T=Q==1?42:-42;var af;var Z=Q==1?[2,3]:[0,1];for(var ab=0;ab<Z.length;++ab){af=Z[ab];var V=ah[af];var Y=false,X=[];if(V>=0&&Q*S[V]<0){var U=e[V][af];if(U>=0&&S[U]==0){var aa=[].concat(S);aa[U]=Q;aa[V]=T;aa[W]=0;var ae=E(aa,U);if(ae&&ae.length>0){for(var R=0;R<ae.length;++R){var ad=ae[R];var ac=new p(W,ad.to,new s({c:V,e:U},ad.over));X.push(ac)}Y=true}else{X.push(new p(W,U,new s({c:V,e:U},m)))}}}if(Y){for(var R=0;R<X.length;++R){if(X[R].length>1){ag.push(X[R])}}}else{for(var R=0;R<X.length;++R){ag.push(X[R])}}}return ag};var B=function(X,Y){var U=e[Y],ae=X[Y],aa=[],Z;var W=ae==2?42:-42;for(Z=0;Z<4;++Z){var ad=false,ab=[],T=U[Z],R;if(T<0||ae*X[T]>=0){continue}R=e[T][Z];if(R<0||X[R]!=0){continue}var V=[].concat(X);V[R]=ae;V[T]=W;V[Y]=0;var ac=B(V,R);if(ac&&ac.length>0){for(var af=0;af<ac.length;++af){var S=ac[af];var Q=new p(Y,S.to,new s({c:T,e:R},S.over));ab.push(Q)}ad=true}else{ab.push(new p(Y,R,new s({c:T,e:R},m)))}if(ad){for(var af=0;af<ab.length;++af){if(ab[af].length>1){aa.push(ab[af])}}}else{for(var af=0;af<ab.length;++af){aa.push(ab[af])}}}return aa};var P=function(Q,U,R){if(U==null||U.length==0){return}for(var Y=0;Y<U.length;++Y){var T=U[Y];var X=[];var V=T.over;var S=0;while(V!=m){X.push(V.head);V=V.tail}var W=new t(T.from,T.to,X);Q.push(W)}};var H,K,w,A,u,I,M,O,D,L,C,J,F=z?1:-1,y=[];for(var G=0;G<32;++G){var v=x[G];if(v==F){P(y,E(x,G),false)}else{if(v==2*F){P(y,B(x,G),true)}}}for(H=0;H<y.length;++H){K=y[H];w=K.sa;A=K.na;u=K.preko;var N=u.length;for(I=H+1;I<y.length;++I){M=y[I];if(M.sa!=w||M.na!=A||N!=M.preko.length){continue}O=[].concat(M.preko);L=N;for(C=0;C<N;++C){J=u[C];for(D=0;D<L;++D){if(J==O[D]){O[D--]=O[--L]}}}O=null;if(L==0){y.splice(I--,1)}}}return y};var l=q(o,n);if(l.length==0){l=r(o,n)}listaMogucihPoteza=l;return l};var a=function(l){l.whiteMove=!l.whiteMove;if(l.whiteMove){l.num++}};var c=function(l,m){var n=function(p){var r=function(x){var D=-1,u=m.length,w,t,A,z,B,C,v,y;A=x.split("x");while(--u>=0){w=m[u];t=w.fullDisplay();if(x==t){return u}else{z=t.split("x");B=false;if(A[0]==(z[0])&&A[A.length-1]==(z[z.length-1])){C=0;B=true;for(v=1;v<A.length-1;++v){y=z.indexOf(A[v],C+1);if(y<0){B=false;break}C=y}}if(B){if(D>=0){return -1}else{D=u}}else{if(x==(w.display())){if(D>=0){return -1}else{D=u}}}}}if(D<0){}return D};var s=r(p);if(s<0){s=r(p.replace(":","x"))}if(s<0){s=r(p.replace("-","x"))}if(s<0){s=r(p.replace(":","-"))}if(s<0){s=r(p.replace("x","-"))}if(s<0){try{log("Error: "+p);log(m)}catch(q){}}return s};var o=n(l);return o<0?null:m[o]};var h=function(l,y,q){var v;if(typeof y=="string"){throw new Error("Position as string not supported (?) : "+y)}else{v=y}if(typeof l=="string"){l=c(l,d(v,q))}if(l==null){try{log("Error#0")}catch(s){}return null}var w,z,A,u,x,r,o;w=l.na;z=l.sa;if((v[w]!=0)&&z!=w){try{log("Error#1")}catch(s){}return null}A=q?1:-1;if(v[z]!=A&&v[z]!=2*A){try{log("Error#2: "+z+"["+v[z]+"] ("+A+")");log(v)}catch(s){}return null}u=l.preko;if(u!=null){x=A==1?-1:1;r=u.length;while(--r>=0){if(v[u[r]]!=x&&v[u[r]]!=2*x){try{log("Error#3")}catch(s){}return null}}}var t={};t[w]=v[w]=j(v[z],w);if(z!=w){t[z]=v[z]=0}if(u!=null){r=u.length;while(--r>=0){var n=u[r];if(n!=w){t[n]=v[n]=0}}}return{move:l,position:v,changed:t}};var f={gameType:21,rows:8,columns:8,squares:32,piecesPerSide:12,firstMoveWhite:false,immediatePromotion:false,turkishCapture:false,captureSeparator:"x",encodeSquare:b,decodeSquare:i,initialPosition:function(){var l=new Array(32),m;for(m=0;m<12;l[m++]=1){}for(m=12;m<20;l[m++]=0){}for(m=20;m<32;l[m++]=-1){}return l},packPosition:function(l){var o="",m;for(m=0;m<32;m+=2){o=o.concat(String.fromCharCode((64+(l[m]+2)*5+l[m+1]+2)))}return o},unpackPosition:g,possibleMoves:d,validMoves:d,findMove:c,makeMove:h,advanceMove:a,checkForPromotion:j,mapping:k};draughts_engine(21,f);draughts_engine("checkers",f);return f})()};